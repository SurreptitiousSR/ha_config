night_fan:
  alias: 30 minute fan
  sequence:
    - event: LOGBOOK_ENTRY
      event_data:
        name: Sleep
        message: cool air for sleeping
        entity_id: device_tracker.sleep
        domain: switch
    - alias: Fan on
      service: switch.turn_on
      data:
        entity_id: switch.fan
    - delay:
        minutes: 30
    - alias: Fan off
      service: switch.turn_off
      data:
        entity_id: switch.fan

home_shutdown:
  alias: home shutdown
  sequence:
    - event: LOGBOOK_ENTRY
      event_data: 
        name: home shutdown
        message: everthing is being turned off
    - service: homeassistant.turn_off
      data:
        entity_id: group.all_lights
    - service: homeassistant.turn_off
      data:
        entity_id: group.all_switches
    - service: homeassistant.turn_off
      data:
        entity_id: group.remote_control_view 


arrive_home:
  alias: arriving home
  sequence:
    - event: LOGBOOK_ENTRY
      event_data:
        name: someone
        message: is arriving home
        domain: switch
    - service: light.turn_on
      data:
        entity_id: light.p1, light.h1, light.la1
    - delay:
        minutes: 5
    - service: light.turn_off
      data:
        entity_id: light.p1

sonos_say:
  alias: "Sonos TTS script"
  sequence:
    - service: sonos.snapshot
      data_template:
        entity_id: "{{ sonos_entity }}"
    - service: sonos.unjoin
      data_template:
        entity_id: "{{ sonos_entity }}"
    - service: media_player.volume_set
      data_template:
        entity_id: "{{ sonos_entity }}"
        volume_level: "{{ volume }}"
    - service: tts.google_say
      data_template:
        entity_id: " {{ sonos_entity }}"
        message: "{{ message }}"
    - delay: "{{ delay }}"
    - service: sonos.restore
      data_template:
        entity_id: "{{ sonos_entity }}"

leave_home:
  alias: leaving home
  sequence:
    - event: LOGBOOK_ENTRY
      event_data:
        name: Sam
        message: is leaving home
        entity_id: device_tracker.sam_sp
